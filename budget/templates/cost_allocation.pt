<!DOCTYPE html>
<html lang="${request.locale_name}">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="pyramid web application">
    <meta name="author" content="Brett Lentz">
    <link rel="shortcut icon" href="${request.static_url('budget:static/pyramid-16x16.png')}">

    <title>OpenShift Statistics and Reporting</title>

    <link href="${request.static_url('budget:static/theme.css')}" rel="stylesheet">
    <link href="${request.static_url('budget:static/cost_allocation.css')}" rel="stylesheet">
		<script src="${request.static_url('budget:static/jquery-2.1.4.min.js')}"></script>
  </head>
  <body>
		<div class='selectors'>
				<form method='post' class='selector-form'>
						<span class="selector-label">Selected Date:</span>
						<select tal:repeat='selector selectors' tal:attributes='name selector' class="selector-dropdown">
								<option tal:repeat='opt selectors[selector]["list"]'
												tal:attributes='value opt'
												tal:attributes='selected "selected" if opt==selectors[selector]["selected"] else None'>
										${opt}
								</option>
						</select>
					<input type='submit' class="selector-submit" />
				</form>
		</div>
		<div>
				<table tal:repeat="account sorted(data)" class="aws_account_table">
						<thead>
								<tr class="header expand">
										<th class="aws_account_name">
												<span class="sign font-bold"></span>
												<span class="aws_account_name font-semi-bold">${account}<span>
												<span class="aws_account_total font-semi-bold" tal:condition="account != 'Total'">$ ${totals[account]['account_total']}</span>
										</th>
								</tr>
						</thead>
						<tbody>
								<tr>
										<td>
												<table tal:repeat="product sorted(data[account])" class="aws_product_table">
														<thead>
																<tr class="header expand">
																		<th class="aws_product_name" colspan="5">
																				<span class="sign font-bold"></span>
																				<span class="aws_product_name font-semi-bold">${product}</span>
																				<span class="aws_product_total font-semi-bold" tal:condition="product != 'Sub-Total'">$ ${totals[account][product]}</span>
																		</th>
																</tr>
																<tr class="aws_lineitem_head">
																		<th class="aws_lineitem_head font-semi-bold">Usage Type</th>
																		<th class="aws_lineitem_head font-semi-bold">Description</th>
																		<th class="aws_lineitem_head font-semi-bold">Usage Quantity</th>
																		<th class="aws_lineitem_head font-semi-bold">Blended Rate</th>
																		<th class="aws_lineitem_head font-semi-bold">Total Cost</th>
																</tr>
														</thead>
														<tbody class="aws_lineitem_container">
																${structure:data[account][product]}
														</tbody>
												</table>
										</td>
								</tr>
						</tbody>
				</table>
				<script type="text/javascript">
						$('.header').click(function(){
								$(this).toggleClass('expand').nextUntil('tr.header').slideToggle(100);
						});
						$('thead').click(function(){
								$(this).siblings('tbody').slideToggle(100); 
						})
						$('.header').click();

				</script>
		</div>
  </body>
</html>
